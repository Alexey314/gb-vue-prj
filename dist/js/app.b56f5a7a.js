(function(t){function e(e){for(var s,i,r=e[0],c=e[1],u=e[2],p=0,m=[];p<r.length;p++)i=r[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(m.length)m.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},o={app:0},a=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0d04":function(t,e,n){t.exports={app:"PaginatedCostsList_app_27SED",main:"PaginatedCostsList_main_203yd","costs-operation":"PaginatedCostsList_costs-operation_xI8bY","costs-visualization":"PaginatedCostsList_costs-visualization_23yVq","add-btn":"PaginatedCostsList_add-btn_3RoOt","add-btn_mb":"PaginatedCostsList_add-btn_mb_Tj4Uz"}},"1ff6":function(t,e,n){"use strict";n("db31")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),n("router-view")],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("h1",[t._v("My personal costs")])])}],i={name:"App",mounted:function(){console.log("App mounted")}},r=i,c=(n("5c0b"),n("2877")),u=Object(c["a"])(r,o,a,!1,null,null,null),l=u.exports,p=n("2909"),m=(n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("99af"),n("2f62"));s["a"].use(m["a"]);var d=new m["a"].Store({state:{costs:[],costsPageCount:1,costsCategories:new Set,costsCurrentPageNum:1},mutations:{setCostsPageData:function(t,e){s["a"].set(t.costs,e.pageNum,e.pageData),t.costsPageCount=e.pageCount},addCostsCategories:function(t,e){t.costsCategories=new Set([].concat(Object(p["a"])(t.costsCategories),Object(p["a"])(e)))},setCostsPageNum:function(t,e){t.costsCurrentPageNum=e}},getters:{getCostsPageData:function(t){return function(e){var n=t.costs[e];return void 0===n?[]:n}},getCostsListPageCount:function(t){return t.costsPageCount},getCostsCategories:function(t){return t.costsCategories},getCostsCurrentPageNum:function(t){return t.costsCurrentPageNum}},actions:{postData:function(t,e){var n=t.commit;return fetch("/PaymentsData",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(t){n("setCostsPageData",t),n("setCostsPageNum",t.pageNum)}))},fetchData:function(t,e){var n=t.commit;return fetch("/PaymentsData?page=".concat(e)).then((function(t){return t.json()})).then((function(t){n("setCostsPageData",t)}))},fetchCategories:function(t){var e=t.commit;return fetch("/Categories").then((function(t){return t.json()})).then((function(t){e("addCostsCategories",t)}))}}}),f=d,g=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"main"},[n("section",{staticClass:"costs-operation"},[n("button",{staticClass:"add-btn add-btn_mb",on:{click:t.toggleInputFormVisible}},[t._v(" ADD NEW COST + ")]),n("cost-input-form",{directives:[{name:"show",rawName:"v-show",value:t.showInputForm,expression:"showInputForm"}]}),n("paginated-costs-list")],1),n("section",{staticClass:"costs-visualization"},[t._v("TBD")])])},v=[],y=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.$style.root]},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectPaymentDescription,expression:"selectPaymentDescription"}],class:[t.$style.input],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectPaymentDescription=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:""}},[t._v("Please select payment description")]),t._l(t.costsCategories,(function(e){return n("option",{key:e},[t._v(t._s(e))])})),n("option",{attrs:{value:"000"}},[t._v("enter new payment description below")])],2),"000"===t.selectPaymentDescription?n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.inputPaymentDescription,expression:"inputPaymentDescription",modifiers:{trim:!0}}],class:[t.$style.input],attrs:{type:"text",placeholder:"Payment description"},domProps:{value:t.inputPaymentDescription},on:{input:function(e){e.target.composing||(t.inputPaymentDescription=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}):t._e(),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.paymentAmount,expression:"paymentAmount",modifiers:{number:!0}}],class:[t.$style.input],attrs:{type:"text",placeholder:"Payment amount"},domProps:{value:t.paymentAmount},on:{input:function(e){e.target.composing||(t.paymentAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.paymentDate,expression:"paymentDate",modifiers:{trim:!0}}],class:[t.$style.input],attrs:{type:"text",placeholder:"Payment date"},domProps:{value:t.paymentDate},on:{input:function(e){e.target.composing||(t.paymentDate=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),n("button",{class:[t.$style.addBtn],attrs:{disabled:!t.isInputsValid},on:{click:t.onClickAdd}},[n("span",{class:[t.$style.addBtnText]},[t._v("ADD")]),t._v("+ ")])])}),P=[],C=n("5530"),b=(n("9129"),n("a9e3"),n("ac1f"),n("1276"),{data:function(){return{selectPaymentDescription:"",inputPaymentDescription:"",paymentAmount:null,paymentDate:""}},methods:Object(C["a"])(Object(C["a"])(Object(C["a"])({},Object(m["d"])(["addCostsCategories"])),Object(m["b"])(["fetchCategories","postData"])),{},{onClickAdd:function(){this.postData({category:this.actualPaymentDescription,value:this.paymentAmount,date:this.paymentDate}),this.isNewPaymentDescription&&this.addCostsCategories([this.inputPaymentDescription])}}),computed:{isInputsValid:function(){return this.actualPaymentDescription&&!Number.isNaN(+this.paymentAmount)&&"number"===typeof this.paymentAmount&&this.paymentDate},costsCategories:function(){return this.$store.getters.getCostsCategories},actualPaymentDescription:function(){return"000"===this.selectPaymentDescription?this.inputPaymentDescription:this.selectPaymentDescription},isNewPaymentDescription:function(){return"000"===this.selectPaymentDescription}},mounted:function(){this.fetchCategories(),"addPaymentPreset"===this.$route.name&&(this.selectPaymentDescription="000",this.inputPaymentDescription=this.$route.params.category,this.paymentAmount=Number(this.$route.query.value),isNaN(this.paymentAmount)&&(this.paymentAmount=""),this.paymentDate=new Date(Date.now()).toLocaleString("ru-RU").split(",")[0],this.isInputsValid&&this.onClickAdd())}}),_=b,D=n("9abe");function N(t){this["$style"]=D["default"].locals||D["default"]}var w=Object(c["a"])(_,y,P,!1,N,null,null),$=w.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.$style.root]},[n("costs-list",{attrs:{"costs-list":t.costsListPaginated}}),n("paginator-widget",{directives:[{name:"show",rawName:"v-show",value:t.costsListPageCount>1,expression:"costsListPageCount > 1"}],attrs:{"page-count":t.costsListPageCount,"page-num":t.costsListPageNum},on:{"change-page":t.onChangePage}})],1)},j=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{class:[t.$style.table]},[n("colgroup",[n("col",{class:[t.$style.colNum]}),n("col",{class:[t.$style.colDate]}),n("col",{class:[t.$style.colCat]}),n("col",{class:[t.$style.colVal]})]),t._m(0),n("tbody",t._l(t.costsList,(function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(e.id))]),n("td",[t._v(t._s(e.date))]),n("td",[t._v(t._s(e.category))]),n("td",[t._v(t._s(e.value))])])})),0)])},L=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",{attrs:{scope:"col"}},[t._v("#")]),n("th",{attrs:{scope:"col"}},[t._v("Date")]),n("th",{attrs:{scope:"col"}},[t._v("Category")]),n("th",{attrs:{scope:"col"}},[t._v("Value")])])}],A={props:{costsList:Array}},I=A,k=n("8df1");function E(t){this["$style"]=k["default"].locals||k["default"]}var F=Object(c["a"])(I,O,L,!1,E,null,null),S=F.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.$style.root]},[n("div",{class:[t.$style.btnPrev],on:{click:t.onPrev}},[t._v("<")]),t._l(t.pageNumbers,(function(e){return n("div",{key:e,class:[t.$style.btnPage,t.pageNum==e?t.$style.btnActive:""],on:{click:function(n){return t.onPageNumClick(e)}}},[t._v(" "+t._s(e)+" ")])})),n("div",{class:[t.$style.btnNext],on:{click:t.onNext}},[t._v(">")])],2)},T=[],M=(n("d81d"),n("cb29"),{props:{pageCount:Number,pageNum:Number},methods:{onPrev:function(){this.emitEvent(Math.max(1,this.pageNum-1))},onNext:function(){this.emitEvent(Math.min(this.pageCount,this.pageNum+1))},onPageNumClick:function(t){this.emitEvent(t)},emitEvent:function(t){this.$emit("change-page",t)}},computed:{pageNumbers:function(){return Array(this.pageCount).fill(0).map((function(t,e){return e+1}))}}}),B=M,W=n("677f");function z(t){this["$style"]=W["default"].locals||W["default"]}var U=Object(c["a"])(B,V,T,!1,z,null,null),q=U.exports,J={components:{CostsList:S,PaginatorWidget:q},data:function(){return{}},methods:Object(C["a"])(Object(C["a"])(Object(C["a"])(Object(C["a"])({},Object(m["d"])(["setCostsPageNum"])),Object(m["b"])(["fetchData"])),Object(m["c"])(["getCostsPageData","getCostsListPageCount","getCostsCurrentPageNum"])),{},{toggleInputFormVisible:function(){this.showInputForm=!this.showInputForm},onChangePage:function(t){this.setCostsPageNum(t),this.fetchData(t)}}),computed:{costsListPageCount:function(){return this.getCostsListPageCount()},costsListPaginated:function(){return this.getCostsPageData()(this.getCostsCurrentPageNum())},costsListPageNum:function(){return this.getCostsCurrentPageNum()}},mounted:function(){this.fetchData(1)},watch:{userAddedCostCount:function(){this.costsListPageNum=this.costsListPageCount}}},R=J,H=n("815a");function K(t){this["$style"]=H["default"].locals||H["default"]}var Q=Object(c["a"])(R,x,j,!1,K,null,null),X=Q.exports,Y={components:{CostInputForm:$,PaginatedCostsList:X},data:function(){return{showInputForm:!1,maxCostsListPageLength:5,costsListPageNum:1}},methods:{toggleInputFormVisible:function(){this.showInputForm=!this.showInputForm}},computed:{},mounted:function(){"addPaymentPreset"!==this.$route.name&&"addPaymentManual"!==this.$route.name||(this.showInputForm=!0)}},G=Y,Z=(n("1ff6"),Object(c["a"])(G,h,v,!1,null,null,null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[t._v("404 Page not found")])},nt=[],st={},ot=st,at=Object(c["a"])(ot,et,nt,!1,null,null,null),it=at.exports;s["a"].use(g["a"]);var rt=new g["a"]({mode:"history",routes:[{path:"/",redirect:"/dashboard"},{path:"/dashboard",component:tt},{path:"/dashboard/:page",component:tt},{path:"/add/payment/:category",name:"addPaymentPreset",component:tt},{path:"/add/payment*",name:"addPaymentManual",component:tt},{path:"*",component:it}]});rt.afterEach((function(t,e){console.log(e,"->",t),console.log(rt.params),console.log(rt.query)}));var ct=rt;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(l)},store:f,router:ct}).$mount("#app")},"5ae3":function(t,e,n){t.exports={root:"PaginatorWidget_root_2pXLi",btnPrev:"PaginatorWidget_btnPrev_1iKky",btnNext:"PaginatorWidget_btnNext_3v1CC",btnPage:"PaginatorWidget_btnPage_2EFVW",btnActive:"PaginatorWidget_btnActive_3qlwC"}},"5c0b":function(t,e,n){"use strict";n("9c0c")},"677f":function(t,e,n){"use strict";var s=n("5ae3"),o=n.n(s);n.d(e,"default",(function(){return o.a}))},6789:function(t,e,n){t.exports={table:"CostsList_table_vAKHf",colNum:"CostsList_colNum_1Ijlo",colDate:"CostsList_colDate_1BNvP",colCat:"CostsList_colCat_21iRn",colVal:"CostsList_colVal_3oIvd"}},"815a":function(t,e,n){"use strict";var s=n("0d04"),o=n.n(s);n.d(e,"default",(function(){return o.a}))},"8df1":function(t,e,n){"use strict";var s=n("6789"),o=n.n(s);n.d(e,"default",(function(){return o.a}))},"9abe":function(t,e,n){"use strict";var s=n("cf18"),o=n.n(s);n.d(e,"default",(function(){return o.a}))},"9c0c":function(t,e,n){},cf18:function(t,e,n){t.exports={root:"CostInputForm_root_3CI_z",input:"CostInputForm_input_11xnC",addBtn:"CostInputForm_addBtn_1PHQu",addBtnText:"CostInputForm_addBtnText_3oMC3"}},db31:function(t,e,n){}});
//# sourceMappingURL=app.b56f5a7a.js.map